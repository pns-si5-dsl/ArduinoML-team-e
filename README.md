# ArduinoML-team-e
This is an experimental project to create the ArduinoML DSL for the Arduino language which includes
an embedded DSL made in Java and an external DSL made with the AntLR framework.  

## Kernel
Our kernel define our domain model as followed:

![UML domain model](./uml/Domain-model.png?raw=true)

## Embedded
### How does it work

Our embedded DSL is implemented in java.
Your application class must extend the [EmbeddedApplication](./src/main/java/internal/builders/EmbeddedApplication.java) class and be annotated by the _@ArduinoML_ annotation.
You can see usage examples in the [examples classes](./src/main/java/internal/examples/).

### How to run

- Compile all example with graddle :

If you create your application class in the _internal.examples_ pakage, the resulting .ino file will be create in the _./out_ directory after running the following command :
```sh 
gradle compileInternalJavaDslExample 
```

- Create your own Main :

You can add a main in your class like below and the resulting code will be printed in the console.
```java
@ArduinoML()
public class MyApplication extends EmbeddedApplication {

    /////////////////////////////////////
    //////// YOUR CODE HERE /////////////
    /////////////////////////////////////
    
    public static void main(String[] args) {
        // build my app
        App app = new MyApplication().build();
        // translate my app
        Visitor<StringBuffer> codeGenerator = new Generator();
        app.accept(codeGenerator);
        // print the translation
        System.out.println(codeGenerator.getGeneratedCode());
    }
} 
```
 
## External

### How does it work

Our external DSL works with the AntLR framework.
Its grammar is located in the file `src/main/java/external/antlr/ArduinoML.g4`
and all other files in the same directory were generated by AntLR from the grammar.
The class `src/main/java/external/arduinoML/builder/ModelBuilder.java` is a listener allowing to build an instance
of the Domain Model by browsing an AST of our DSL.
The class `src/main/java/external/Main.java` allows to compile a text file written in our DSL into an `.ino` file.  
  
If you want to add syntax highlighting when editing a file in the ArduinoML DSL,
you can easily import a customised TextMate Bundle we made in your favorite IDE.
That TextMate only works for files with a `.aml` extension.  

- JetBrains

You first need to install the TextMate Bundles plugin.
Then go to `File > Settings > Editor > TextMate Bundles` and click on the `+` button.
From there, select the `plugins/arduino-ml` directory and enable _**arduino-ml**_ in the list.

- VS Code

// TODO

- Eclipse

// TODO

### How to run

To run the external DSL, you have to execute `src/main/java/external/Main.java` passing it 2 arguments:

- the path of the file to compile
- the name of the output file

Then, a `.ino` file (named as you wished) will be created in the source file directory.  
A set of examples for the given scenarios is available in `src/main/java/external/examples/`.

# Authors
- Brilhante Jo√£o
- Briziarelli Enzo
- Ducrocq Charly
- Larose Quentin
- Marti Ludovic

